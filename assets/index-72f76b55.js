import{J as e,l as t,m as a,L as n,aB as l,aC as s,p as r,I as o,a as c,b as i,Q as u,R as d,X as m,a6 as p,u as h,W as v,V as b,F as f,am as g,aD as w,ag as k,e as _,aA as F,Z as E,a9 as x,U as R,a0 as y,d as S,S as C,Y as z,B}from"./vue-12cb0627.js";import{_ as I,s as L,g as q,c as A}from"./index-61e62b51.js";import{E as H}from"./element-plus-06751a6d.js";const j=()=>document.body.getBoundingClientRect().width-1<992,M=e({name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:{toggleClick:null}}),P=[(e=>(l("data-v-2b852698"),e=e(),s(),e))((()=>r("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)))];const D=I(M,[["render",function(e,l,s,r,o,c){return t(),a("div",{style:{padding:"0 15px"},onClick:l[0]||(l[0]=t=>e.$emit("toggleClick"))},[(t(),a("svg",{class:n([{"is-active":e.isActive},"hamburger"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},P,2))])}],["__scopeId","data-v-2b852698"]]),$={key:0,class:"no-redirect"},N=I(e({__name:"Breadcrumb",setup(e){const n=w();o((()=>{s()}));let l=c([]);i(n,(()=>{s()}));const s=()=>{let e=n.matched.filter((e=>e.meta&&e.meta.title));const t=e[0];if(!r(t)){e=[{path:"/home",meta:{title:"首页"}}].concat(e)}l.value=e.filter((e=>e.meta&&e.meta.title&&!1!==e.meta.breadcrumb))},r=e=>{const t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Home".toLocaleLowerCase()};return(e,n)=>{const s=k("router-link"),r=k("el-breadcrumb-item"),o=k("el-breadcrumb");return t(),u(o,{separator:"/",class:"app-breadcrumb"},{default:d((()=>[m(g,{name:"breadcrumb"},{default:d((()=>[(t(!0),a(f,null,p(h(l),((e,n)=>(t(),u(r,{key:e.path},{default:d((()=>["noRedirect"===e.redirect||n==h(l).length-1?(t(),a("span",$,v(e.meta.title),1)):(t(),u(s,{key:1,to:e.redirect||e.path},{default:d((()=>[b(v(e.meta.title),1)])),_:2},1032,["to"]))])),_:2},1024)))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-5dc98e7a"]]),O=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],T=(()=>{if("undefined"==typeof document)return!1;const e=O[0],t={};for(const a of O){if((null==a?void 0:a[1])in document){for(const[n,l]of a.entries())t[e[n]]=l;return t}}return!1})(),U={change:T.fullscreenchange,error:T.fullscreenerror};let V={request:(e=document.documentElement,t)=>new Promise(((a,n)=>{const l=()=>{V.off("change",l),a()};V.on("change",l);const s=e[T.requestFullscreen](t);s instanceof Promise&&s.then(l).catch(n)})),exit:()=>new Promise(((e,t)=>{if(!V.isFullscreen)return void e();const a=()=>{V.off("change",a),e()};V.on("change",a);const n=document[T.exitFullscreen]();n instanceof Promise&&n.then(a).catch(t)})),toggle:(e,t)=>V.isFullscreen?V.exit():V.request(e,t),onchange(e){V.on("change",e)},onerror(e){V.on("error",e)},on(e,t){const a=U[e];a&&document.addEventListener(a,t,!1)},off(e,t){const a=U[e];a&&document.removeEventListener(a,t,!1)},raw:T};Object.defineProperties(V,{isFullscreen:{get:()=>Boolean(document[T.fullscreenElement])},element:{enumerable:!0,get:()=>document[T.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[T.fullscreenEnabled])}}),T||(V={isEnabled:!1});const J=V;const Q=I(e({name:"Screenfull",data:()=>({isFullscreen:!1}),mounted(){this.init()},beforeUnmount(){this.destroy()},methods:{click:()=>J.isEnabled?(J.toggle(),!1):(H({message:"you browser can not work",type:"warning"}),!1),change(){this.isFullscreen=J.isFullscreen},init(){J.isEnabled&&J.on("change",this.change)},destroy(){J.isEnabled&&J.off("change",this.change)}}}),[["render",function(e,n,l,s,r,o){const c=k("I");return t(),a("div",{class:"screenfull-box",onClick:n[0]||(n[0]=(...t)=>e.click&&e.click(...t))},[m(c,{name:"FullScreen",size:"18"})])}],["__scopeId","data-v-dc4ea5ee"]]),W={class:"navbar"},X={class:"right-menu"},Y={class:"avatar-wrapper"},Z=["src"],G=I(e({__name:"index",setup(e){const n=_((()=>L.state.app.sidebar.opened)),l=_((()=>L.state.user.avatar)),s=F(),o=()=>{L.dispatch("app/toggleSideBar")},c=()=>{L.dispatch("user/logout").then((e=>{s.push("/login")}))},i=()=>{};return(e,s)=>{const u=k("el-tooltip"),p=k("I"),v=k("el-dropdown-item"),f=k("el-dropdown-menu"),g=k("el-dropdown");return t(),a("div",W,[m(D,{class:"hamburger-container","is-active":h(n),onToggleClick:o},null,8,["is-active"]),m(N,{class:"breadcrumb-container"}),r("div",X,[m(u,{effect:"dark",content:"全屏",placement:"bottom"},{default:d((()=>[m(Q,{class:"screenfull"})])),_:1}),m(g,{class:"avatar-container right-menu-item"},{dropdown:d((()=>[m(f,null,{default:d((()=>[m(v,{onClick:s[0]||(s[0]=t=>e.$router.push("/"))},{default:d((()=>[b("首页")])),_:1}),m(v,{divided:"",onClick:i},{default:d((()=>[b("修改密码")])),_:1}),m(v,{divided:"",onClick:c},{default:d((()=>[b("登出")])),_:1})])),_:1})])),default:d((()=>[r("div",Y,[r("img",{src:h(l)?h(l):"/img/logo.png",class:"user-avatar"},null,8,Z),m(p,{name:"CaretBottom"})])])),_:1})])])}}}),[["__scopeId","data-v-009485c9"]]),K={class:"app-main"},ee=I(e({__name:"AppMain",setup(e){const n=w().path;return(e,l)=>{const s=k("router-view");return t(),a("section",K,[m(E,{name:"fade-transform",mode:"out-in"},{default:d((()=>[(t(),u(s,{key:h(n)}))])),_:1})])}}}),[["__scopeId","data-v-8eeea990"]]),te=e({__name:"SidebarItem",props:{navRoute:{type:Object,required:!0},isNest:{type:Boolean,default:!1}},setup:e=>(x(e),(l,s)=>{const o=k("I"),c=k("el-menu-item"),i=k("SidebarItem",!0),m=k("el-sub-menu");return e.navRoute.meta&&!e.navRoute.hide?(t(),a(f,{key:0},[e.navRoute.children&&e.navRoute.children.length?(t(),u(m,{key:1,index:e.navRoute.path},{title:d((()=>[e.navRoute.meta.icon?(t(),u(o,{key:0,name:e.navRoute.meta.icon,size:"18",class:"sidebar-icon"},null,8,["name"])):R("",!0),r("span",null,v(e.navRoute.meta.title),1)])),default:d((()=>[(t(!0),a(f,null,p(e.navRoute.children,(e=>(t(),a("div",{key:e.path},[e.children&&e.children.length?(t(),u(i,{key:e.path,index:e.path,"is-nest":!0,navRoute:e,class:"nest-menu"},null,8,["index","navRoute"])):(t(),u(c,{key:1,index:e.path},{title:d((()=>[r("span",null,v(e.meta.title),1)])),_:2},1032,["index"]))])))),128))])),_:1},8,["index"])):(t(),u(c,{key:0,index:e.navRoute.path,class:n({"sub-menu-title-noDropdown":!e.navRoute.isNest})},{title:d((()=>[r("span",null,v(e.navRoute.meta.title),1)])),default:d((()=>[e.navRoute.meta.icon?(t(),u(o,{key:0,name:e.navRoute.meta.icon,size:"18",class:"sidebar-icon"},null,8,["name"])):R("",!0)])),_:1},8,["index","class"]))],64)):R("",!0)})}),ae={key:0,class:"logo"},ne=["src"],le={class:"logo-text"},se=I(e({__name:"index",setup(e){const l=_((()=>L.state.app.sidebar.opened)),s=_((()=>!L.state.app.sidebar.opened)),o=c(!0),i=q(),v=y([]);S((()=>{b()}));const b=()=>{A.forEach((e=>{if("/"===e.path){const t=e.children;v.push(...t)}}));for(let e=0;e<v.length;e++)v[e].meta&&v[e].meta.roles&&!v[e].meta.roles.includes(i)&&(v.splice(e,1),e--);g(v)},g=e=>{const t=[];e.forEach((e=>{(e.meta&&!e.meta.roles||e.meta&&e.meta.roles&&e.meta.roles.includes(i))&&(t.push(e),e.children&&g(e.children))})),e.length=0,e.push(...t)};return(e,c)=>{const i=k("el-menu"),b=k("el-scrollbar");return t(),a("div",{class:n(["sidebar-container",{"has-logo":o.value}])},[o.value?(t(),a("div",ae,[r("img",{class:"logo-img",src:h("/vue3-elementplus-admin/assets/vue-5532db34.svg"),alt:"logo"},null,8,ne),m(E,{name:"fade-transform",mode:"out-in"},{default:d((()=>[C(r("h1",le,"Admin",512),[[z,h(l)]])])),_:1})])):R("",!0),m(b,{"wrap-class":"scrollbar-wrapper"},{default:d((()=>[m(i,{router:!0,class:"v-enter-to","default-active":e.$route.path,collapse:h(s),"unique-opened":!1,"collapse-transition":!1,mode:"vertical","text-color":"#bfcbd9","background-color":"#304156","active-text-color":"#409EFF"},{default:d((()=>[(t(!0),a(f,null,p(v,(e=>(t(),u(te,{key:e.path,index:e.path,navRoute:e},null,8,["index","navRoute"])))),128))])),_:1},8,["default-active","collapse"])])),_:1})],2)}}}),[["__scopeId","data-v-b4913814"]]),re={class:"main-container"},oe=I(e({__name:"index",setup(e){const l=w(),s=_((()=>L.state.app.sidebar.opened)),c=_((()=>L.state.app.sidebar.withoutAnimation)),u=_((()=>L.state.app.device)),d=_((()=>({hideSidebar:!s.value,openSidebar:s.value,withoutAnimation:c.value,mobile:"mobile"===u.value})));o((()=>{window.addEventListener("resize",v)})),S((()=>{j()&&(L.dispatch("app/toggleDevice","mobile"),L.dispatch("app/closeSideBar",!0))})),B((()=>{window.removeEventListener("resize",v)})),i(l,(()=>{"mobile"===u.value&&s.value&&L.dispatch("app/closeSideBar",!1)}));const p=()=>{L.dispatch("app/closeSideBar",!1)},v=()=>{if(!document.hidden){const e=j();L.dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&L.dispatch("app/closeSideBar",!0)}};return(e,l)=>{const o=k("TagsView");return t(),a("div",{class:n(["app-wrapper",h(d)])},["mobile"===h(u)&&h(s)?(t(),a("div",{key:0,class:"drawer-bg",onClick:p})):R("",!0),m(se),r("div",re,[m(G),m(o),m(ee)])],2)}}}),[["__scopeId","data-v-2ced4b73"]]);export{oe as default};
